{"ast":null,"code":"import { supabase } from '../config';\nclass SubjectService {\n  async createSubject(subjectData) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('subjects').insert([{\n        ...subjectData,\n        created_at: new Date().toISOString()\n      }]).select();\n      if (error) throw error;\n      return data[0];\n    } catch (error) {\n      console.error('Error al crear la asignatura:', error);\n      throw error;\n    }\n  }\n  async getSubjects(professorId) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('subjects').select('*').eq('professor_id', professorId).order('created_at', {\n        ascending: false\n      });\n      if (error) throw error;\n      return data;\n    } catch (error) {\n      console.error('Error al obtener las asignaturas:', error);\n      throw error;\n    }\n  }\n  async getSubjectById(subjectId) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('subjects').select('*').eq('id', subjectId).single();\n      if (error) throw error;\n      return data;\n    } catch (error) {\n      console.error('Error al obtener la asignatura:', error);\n      throw error;\n    }\n  }\n  async updateSubject(subjectId, subjectData) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('subjects').update(subjectData).eq('id', subjectId).select();\n      if (error) throw error;\n      return data[0];\n    } catch (error) {\n      console.error('Error al actualizar la asignatura:', error);\n      throw error;\n    }\n  }\n  async deleteSubject(subjectId) {\n    try {\n      const {\n        error\n      } = await supabase.from('subjects').delete().eq('id', subjectId);\n      if (error) throw error;\n      return true;\n    } catch (error) {\n      console.error('Error al eliminar la asignatura:', error);\n      throw error;\n    }\n  }\n  async getEnrolledStudents(subjectId) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('enrollments').select(`\n                    *,\n                    students:student_id (\n                        id,\n                        name,\n                        email\n                    )\n                `).eq('subject_id', subjectId);\n      if (error) throw error;\n      return data.map(enrollment => enrollment.students);\n    } catch (error) {\n      console.error('Error al obtener los estudiantes inscritos:', error);\n      throw error;\n    }\n  }\n}\nexport const subjectService = new SubjectService();","map":{"version":3,"names":["supabase","SubjectService","createSubject","subjectData","data","error","from","insert","created_at","Date","toISOString","select","console","getSubjects","professorId","eq","order","ascending","getSubjectById","subjectId","single","updateSubject","update","deleteSubject","delete","getEnrolledStudents","map","enrollment","students","subjectService"],"sources":["C:/Users/bruno/Documents/UNIR/TFE/EDUIA/src/services/subject.service.js"],"sourcesContent":["import { supabase } from '../config';\r\n\r\nclass SubjectService {\r\n    async createSubject(subjectData) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('subjects')\r\n                .insert([{\r\n                    ...subjectData,\r\n                    created_at: new Date().toISOString()\r\n                }])\r\n                .select();\r\n\r\n            if (error) throw error;\r\n            return data[0];\r\n        } catch (error) {\r\n            console.error('Error al crear la asignatura:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async getSubjects(professorId) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('subjects')\r\n                .select('*')\r\n                .eq('professor_id', professorId)\r\n                .order('created_at', { ascending: false });\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        } catch (error) {\r\n            console.error('Error al obtener las asignaturas:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async getSubjectById(subjectId) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('subjects')\r\n                .select('*')\r\n                .eq('id', subjectId)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        } catch (error) {\r\n            console.error('Error al obtener la asignatura:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async updateSubject(subjectId, subjectData) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('subjects')\r\n                .update(subjectData)\r\n                .eq('id', subjectId)\r\n                .select();\r\n\r\n            if (error) throw error;\r\n            return data[0];\r\n        } catch (error) {\r\n            console.error('Error al actualizar la asignatura:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async deleteSubject(subjectId) {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('subjects')\r\n                .delete()\r\n                .eq('id', subjectId);\r\n\r\n            if (error) throw error;\r\n            return true;\r\n        } catch (error) {\r\n            console.error('Error al eliminar la asignatura:', error);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async getEnrolledStudents(subjectId) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('enrollments')\r\n                .select(`\r\n                    *,\r\n                    students:student_id (\r\n                        id,\r\n                        name,\r\n                        email\r\n                    )\r\n                `)\r\n                .eq('subject_id', subjectId);\r\n\r\n            if (error) throw error;\r\n            return data.map(enrollment => enrollment.students);\r\n        } catch (error) {\r\n            console.error('Error al obtener los estudiantes inscritos:', error);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n\r\nexport const subjectService = new SubjectService(); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}